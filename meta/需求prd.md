# 详细需求

## 1. 需求背景

本需求源于用户对智能网页助手的需求，旨在开发一个基于Azure OpenAI的Chrome扩展程序。主要目的是为用户提供便捷的AI对话和网页内容处理功能，提升用户的网页浏览和内容处理效率。该扩展将帮助用户更好地理解、翻译和分析网页内容，同时提供智能对话支持。

## 2. 用户需求

### 2.1 用户角色

* 普通用户：系统的主要使用者，使用基本的对话和内容处理功能

* 知识工作者：需要深度内容分析和理解的专业用户

### 2.2 用户故事

* 普通用户：

1. 作为普通用户，我希望能快速翻译网页中的外语内容，以便理解不同语言的信息。

2. 作为普通用户，我想要能够与AI进行自然对话，解答我的各种问题。

3. 作为普通用户，我需要一个简单的方式来总结长文本的主要内容。

* 知识工作者：

1. 作为知识工作者，我需要AI帮助我分析复杂文本的逻辑结构。

2. 作为知识工作者，我希望能够快速理解专业术语和概念。

3. 作为知识工作者，我需要在浏览网页时保持连贯的对话上下文。

## 3. 需求功能需求

### 3.1 需求功能概述

AiBot智能助手包含以下主要功能模块：

1. AI对话模块：提供基于Azure OpenAI的智能对话功能

2. 文本处理模块：提供多种预设的文本处理模式

3. 用户界面模块：包括侧边栏对话窗口和悬浮工具条

4. 配置管理模块：管理用户设置和API配置

### 3.2 功能需求详述

#### 1. AI对话模块

| 功能项 | 基础对话功能 |

|--------|------------|

| 功能描述 | 提供与AI的自然语言对话能力，支持文件上传和处理 |

| 用户交互 | 1. 用户在侧边栏输入框中输入问题<br>2. 支持上传图片、文本和PDF文件作为对话输入<br>3. 系统显示AI的回复内容<br>4. 支持连续对话 |

| 系统行为 | 1. 保持最近5-10条对话记录作为上下文<br>2. 处理上传的文件：<br>   - 图片：显示预览<br>   - 文本文件：提取文本内容<br>   - PDF文件：提取文本内容<br>3. 通过Azure OpenAI API处理对话请求<br>4. 实时显示AI响应内容 |

| 限制条件 | - 对话上下文限制为最近5-10条<br>- 单次请求的文本长度需符合API限制<br>- 支持的文件格式：<br>   - 图片：JPG、PNG、GIF<br>   - 文本：TXT、DOC、DOCX<br>   - PDF文件<br>- 文件大小限制：最大10MB |

| 错误提示 | - "网络连接失败，请检查网络设置"<br>- "API调用失败，请稍后重试"<br>- "上下文长度超出限制"<br>- "文件格式不支持"<br>- "文件大小超出限制"<br>- "文件处理失败，请重试" |

#### 2. 文本处理模块

| 功能项 | 预设模式功能 |

|--------|------------|

| 功能描述 | 提供多种预设的文本处理模式 |

| 用户交互 | 1. 用户选中网页文本<br>2. 系统显示悬浮工具条<br>3. 用户选择所需的处理模式 |

| 系统行为 | 1. 翻译模式：自动检测语言并翻译<br>2. 总结模式：提取核心要点<br>3. 解释模式：解释专业术语<br>4. 分析模式：分析文本结构 |

| 限制条件 | - 选中文本长度限制<br>- 需要网页访问权限 |

| 错误提示 | - "选中文本过长，请缩短选择范围"<br>- "无法访问当前网页内容" |

#### 3. 用户界面模块

| 功能项 | 侧边栏对话窗口 |

|--------|------------|

| 功能描述 | 在浏览器右侧提供对话界面 |

| 用户交互 | 1. 点击扩展图标打开/关闭侧边栏<br>2. 可调整侧边栏宽度<br>3. 支持对话内容滚动 |

| 系统行为 | 1. 记住用户设置的窗口大小<br>2. 保持对话历史记录<br>3. 提供清晰的视觉反馈 |

| 限制条件 | - 最小宽度限制<br>- 最大宽度不超过屏幕的50% |

| 错误提示 | - "窗口大小调整失败"<br>- "历史记录加载失败" |

| 功能项 | 悬浮工具条 |

|--------|------------|

| 功能描述 | 选中文本时显示操作工具条 |

| 用户交互 | 1. 选中文本自动显示<br>2. 点击选择处理模式<br>3. 可拖动调整位置 |

| 系统行为 | 1. 智能定位显示位置<br>2. 根据选中内容调整工具条选项<br>3. 处理完成后自动隐藏 |

| 限制条件 | - 工具条显示位置不超出视口<br>- 选中文本长度限制 |

| 错误提示 | - "无法显示工具条"<br>- "当前页面不支持此操作" |

#### 4. 配置管理模块

| 功能项 | 设置管理 |

|--------|------------|

| 功能描述 | 管理插件配置和API设置 |

| 用户交互 | 1. 访问设置页面<br>2. 配置Azure OpenAI API参数<br>3. 设置界面偏好 |

| 系统行为 | 1. 保存用户配置<br>2. 验证API配置有效性<br>3. 应用界面设置 |

| 限制条件 | - API密钥格式验证<br>- 必填项检查 |

| 错误提示 | - "API配置无效"<br>- "设置保存失败"<br>- "必填项不能为空" |

# 重点提醒

- 使用React作为前端框架，TypeScript确保代码质量，并采用模块化的设计方式来构建这个扩展程序

目录结构优化考虑点

- manifest.json 应该在根目录，因为Chrome加载扩展时会直接查找

- 静态资源(图标等)需要直接访问，应放在根目录

- 源代码应该组织在 src 目录便于维护

- 构建输出目录应该分开

Chrome扩展关键文件要求

- manifest.json (V3规范)必须在根目录

- 后台服务工作者(Service Worker)需要独立文件

- HTML文件(popup等)需要直接访问

- 权限声明需要在manifest中配置

# UI设计

整体UI设计风格及布局，参考图片。请完美复刻！！！
![UI](UI参考.png)
